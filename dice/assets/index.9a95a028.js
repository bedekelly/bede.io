import{s as b,l as g,A as w,j as L,a as v,F as E,y as I,S as R}from"./vendor.d9dbf41c.js";const j=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const i of e)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(e){const i={};return e.integrity&&(i.integrity=e.integrity),e.referrerpolicy&&(i.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?i.credentials="include":e.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(e){if(e.ep)return;e.ep=!0;const i=r(e);fetch(e.href,i)}};j();const p=[2,4,6,8,10,12,20,100];function m(l){return l.reduce((t,r,n,e)=>t+r*10**(e.length-n-1),0)}function D(l){return l==="`"||l==="Tab"||l==="CapsLock"||l==="e"?0:parseInt(l,10)}function $(l){const t=l.map(D);if(t.some(r=>isNaN(r))||t.length===0)return null;if(t.length===1)return p.includes(t[0])?`1d${t[0]}`:t[0]===0?"1d10":`${t[0]}d`;if(t.length===2){const[r,n]=t;if(r===0&&n===0)return"1d100";for(const e of p)if(r*10+n===e)return`1d${e}`;return p.includes(n)?`${r}d${n}`:n===0?`${r}d10`:n===1?`${r}d10`:`${r}${n}d`}if(t.length>=3){const[r,n]=t.slice(-2),e=t.slice(0,-2);if(`${r}${n}`=="00")return e[e.length-1]===1?e.slice(0,-1).length==0?"1d100":`${m(e.slice(0,-1))}d100`:`${m(e)}d100`;const i=parseInt(`${r}${n}`,10);return r!==0&&p.includes(i)?`${m(e)}d${i}`:n===0||n===1?`${m([...e,r])}d${10}`:p.includes(n)?`${m([...e,r])}d${n}`:`${m([...e,r,n])}d`}return null}function A(l){return Math.floor(Math.random()*l)+1}function B(l){let t=l.split("+");t=t.map(e=>e.trim());let r=0,n=[];for(let e of t){let[i,s]=e.split("d").map(a=>parseInt(a,10));i>99&&([s,i]=[i,s]);for(let a=0;a<i;a++){const d=A(s);s<=100&&n.push(d),r+=d}}return[r,n]}function F(l){const t=b(l),[r,n]=g(l),e=w(i=>{t.current=i,n(i)},[]);return[t,r,e]}const c=L,u=v,O=E;function K(){return c("div",{className:"blink",children:"_"})}function M({children:[l,t,r]}){return u("div",{className:"w-full flex my-1",children:[u("div",{className:"w-1/2 text-right",children:[l.trim()," = "]}),u("div",{className:"w-1/2",children:["\xA0",t," ",r.length>1&&u("span",{className:"opacity-50 text-lg",children:["(",r.join(" + "),")"]})]})]})}function S(l){return!(!l||l.endsWith("d"))}function T(){const[l,t]=g([]),[r,n]=g([]),[e,i,s]=F(!1);I(()=>{function d(o){const f=$(o);if(s(!1),S(f)){const[x,N]=B(f);n(k=>[[f,x,N],...k.slice(0,10)])}return[]}function h(o){if(!o.repeat){if(o.key==="r"){s(!0);return}if(!!e.current){if(o.key==="Escape"){t([]),s(!1);return}if(o.key==="Backspace"){t(f=>f.slice(0,-1));return}if(o.key==="Enter"||o.key===" "){t(d);return}"1234567890".includes(o.key)&&t(f=>[...f,o.key])}}}function y(o){o.key==="r"&&t(d)}return document.addEventListener("keydown",h),document.addEventListener("keyup",y),()=>{document.removeEventListener("keydown",h),document.removeEventListener("keyup",y)}},[]);const a=$(l);return u("main",{className:"font-sans flex flex-col items-center content-center w-full",children:[c("h1",{className:"text-center font-bold text-5xl mt-10",children:i?u(O,{children:["Rolling: ",a,c(K,{})]}):u("div",{className:"mt-3",children:["Hold"," ",c("kbd",{className:"border border-gray-300 rounded-lg px-3 py-1",children:"r"})," ","to roll."]})}),i&&u("p",{className:"mt-8",children:["Let go to roll, or hit"," ",c("kbd",{className:"border border-gray-300 rounded-lg px-2 py-1 mx-1",children:"Esc"})," ","to cancel."]}),c("ul",{className:"flex list-none items-center flex-col text-2xl mt-10 w-full",children:r.map((d,h)=>c("li",{className:"first:mb-3 first:text-white first:font-bold text-gray-200 contents",children:c(M,{children:d})},h))})]})}R(c(T,{}),document.getElementById("app"));
