import{s as b,l as y,A as w,j as L,a as v,F as E,y as I,S as R}from"./vendor.d9dbf41c.js";const j=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))l(e);new MutationObserver(e=>{for(const i of e)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function n(e){const i={};return e.integrity&&(i.integrity=e.integrity),e.referrerpolicy&&(i.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?i.credentials="include":e.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(e){if(e.ep)return;e.ep=!0;const i=n(e);fetch(e.href,i)}};j();const m=[2,4,6,8,10,12,20,100];function p(r){return r.reduce((t,n,l,e)=>t+n*10**(e.length-l-1),0)}function D(r){return r==="`"||r==="Tab"||r==="CapsLock"||r==="e"?0:parseInt(r,10)}function x(r){const t=r.map(D);if(t.some(n=>isNaN(n))||t.length===0)return null;if(t.length===1)return m.includes(t[0])?`1d${t[0]}`:t[0]!==0?`${t[0]}d...`:null;if(t.length===2){const[n,l]=t;if(n===0&&l===0)return"1d100";for(const e of m)if(n*10+l===e)return`1d${e}`;return m.includes(l)?`${n}d${l}`:l===1?`${n}d10`:`${n}${l}d...`}if(t.length>=3){const[n,l]=t.slice(-2),e=t.slice(0,-2);if(`${n}${l}`=="00")return e[e.length-1]===1?`${p(e.slice(0,-1))}d100`:`${p(e)}d100`;const i=parseInt(`${n}${l}`,10);if(n!==0&&m.includes(i))return`${p(e)}d${i}`;if(l===1)return`${p([...e,n])}d${10}`;if(m.includes(l))return`${p([...e,n])}d${l}`}return null}function A(r){return Math.floor(Math.random()*r)+1}function F(r){let t=r.split("+");t=t.map(e=>e.trim());let n=0,l=[];for(let e of t){const[i,o]=e.split("d").map(f=>parseInt(f,10));for(let f=0;f<i;f++){const d=A(o);l.push(d),n+=d}}return[n,l]}function O(r){const t=b(r),[n,l]=y(r),e=w(i=>{t.current=i,l(i)},[]);return[t,n,e]}const c=L,u=v,B=E;function K(){return c("div",{className:"blink",children:"_"})}function M({children:[r,t,n]}){return u("div",{className:"w-full flex my-1",children:[u("div",{className:"w-1/2 text-right",children:[r.trim()," = "]}),u("div",{className:"w-1/2",children:["\xA0",t," ",n.length>1&&u("span",{className:"opacity-50 text-lg",children:["(",n.join(" + "),")"]})]})]})}function S(r){return!(!r||r.includes("..."))}function T(){const[r,t]=y([]),[n,l]=y([]),[e,i,o]=O(!1);I(()=>{function d(s){const a=x(s);if(o(!1),S(a)){const[$,N]=F(a);l(k=>[[a,$,N],...k.slice(0,10)])}return[]}function h(s){if(!s.repeat){if(s.key==="r"){o(!0);return}if(!!e.current){if(s.key==="Escape"){t([]),o(!1);return}if(s.key==="Backspace"){t(a=>a.slice(0,-1));return}if(s.key==="Enter"||s.key===" "){t(d);return}"1234567890".includes(s.key)&&t(a=>[...a,s.key])}}}function g(s){s.key==="r"&&t(d)}return document.addEventListener("keydown",h),document.addEventListener("keyup",g),()=>{document.removeEventListener("keydown",h),document.removeEventListener("keyup",g)}},[]);const f=x(r);return u("main",{className:"font-sans flex flex-col items-center content-center w-full",children:[c("h1",{className:"text-center font-bold text-5xl mt-10",children:i?u(B,{children:["Rolling: ",f,c(K,{})]}):u("div",{className:"mt-3",children:["Hold"," ",c("kbd",{className:"border border-gray-300 rounded-lg px-3 py-1",children:"r"})," ","to roll."]})}),i&&u("p",{className:"mt-8",children:["Let go to roll, or hit"," ",c("kbd",{className:"border border-gray-300 rounded-lg px-2 py-1 mx-1",children:"Esc"})," ","to cancel."]}),c("ul",{className:"flex list-none items-center flex-col text-2xl mt-10 w-full",children:n.map((d,h)=>c("li",{className:"first:mb-3 first:text-white first:font-bold text-gray-200 contents",children:c(M,{children:d})},h))})]})}R(c(T,{}),document.getElementById("app"));
