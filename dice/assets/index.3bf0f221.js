import{s as b,l as y,A as w,j as L,a as v,F as E,y as I,S as R}from"./vendor.d9dbf41c.js";const j=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const l of e)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(e){const l={};return e.integrity&&(l.integrity=e.integrity),e.referrerpolicy&&(l.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?l.credentials="include":e.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(e){if(e.ep)return;e.ep=!0;const l=r(e);fetch(e.href,l)}};j();const m=[2,4,6,8,10,12,20,100];function p(i){return i.reduce((t,r,n,e)=>t+r*10**(e.length-n-1),0)}function D(i){return i==="`"||i==="Tab"||i==="CapsLock"||i==="e"?0:parseInt(i,10)}function $(i){const t=i.map(D);if(t.some(r=>isNaN(r))||t.length===0)return null;if(t.length===1)return m.includes(t[0])?`1d${t[0]}`:t[0]===0?"1d10":`${t[0]}d`;if(t.length===2){const[r,n]=t;if(r===0&&n===0)return"1d100";for(const e of m)if(r*10+n===e)return`1d${e}`;return m.includes(n)?`${r}d${n}`:n===0?`${r}d10`:n===1?`${r}d10`:`${r}${n}d`}if(t.length>=3){const[r,n]=t.slice(-2),e=t.slice(0,-2);if(`${r}${n}`=="00")return e[e.length-1]===1?`${p(e.slice(0,-1))}d100`:`${p(e)}d100`;const l=parseInt(`${r}${n}`,10);if(r!==0&&m.includes(l))return`${p(e)}d${l}`;if(n===0||n===1)return`${p([...e,r])}d${10}`;if(m.includes(n))return`${p([...e,r])}d${n}`}return null}function A(i){return Math.floor(Math.random()*i)+1}function F(i){let t=i.split("+");t=t.map(e=>e.trim());let r=0,n=[];for(let e of t){const[l,o]=e.split("d").map(f=>parseInt(f,10));for(let f=0;f<l;f++){const d=A(o);n.push(d),r+=d}}return[r,n]}function O(i){const t=b(i),[r,n]=y(i),e=w(l=>{t.current=l,n(l)},[]);return[t,r,e]}const c=L,u=v,B=E;function K(){return c("div",{className:"blink",children:"_"})}function M({children:[i,t,r]}){return u("div",{className:"w-full flex my-1",children:[u("div",{className:"w-1/2 text-right",children:[i.trim()," = "]}),u("div",{className:"w-1/2",children:["\xA0",t," ",r.length>1&&u("span",{className:"opacity-50 text-lg",children:["(",r.join(" + "),")"]})]})]})}function S(i){return!(!i||i.endsWith("d"))}function T(){const[i,t]=y([]),[r,n]=y([]),[e,l,o]=O(!1);I(()=>{function d(s){const a=$(s);if(o(!1),S(a)){const[x,N]=F(a);n(k=>[[a,x,N],...k.slice(0,10)])}return[]}function h(s){if(!s.repeat){if(s.key==="r"){o(!0);return}if(!!e.current){if(s.key==="Escape"){t([]),o(!1);return}if(s.key==="Backspace"){t(a=>a.slice(0,-1));return}if(s.key==="Enter"||s.key===" "){t(d);return}"1234567890".includes(s.key)&&t(a=>[...a,s.key])}}}function g(s){s.key==="r"&&t(d)}return document.addEventListener("keydown",h),document.addEventListener("keyup",g),()=>{document.removeEventListener("keydown",h),document.removeEventListener("keyup",g)}},[]);const f=$(i);return u("main",{className:"font-sans flex flex-col items-center content-center w-full",children:[c("h1",{className:"text-center font-bold text-5xl mt-10",children:l?u(B,{children:["Rolling: ",f,c(K,{})]}):u("div",{className:"mt-3",children:["Hold"," ",c("kbd",{className:"border border-gray-300 rounded-lg px-3 py-1",children:"r"})," ","to roll."]})}),l&&u("p",{className:"mt-8",children:["Let go to roll, or hit"," ",c("kbd",{className:"border border-gray-300 rounded-lg px-2 py-1 mx-1",children:"Esc"})," ","to cancel."]}),c("ul",{className:"flex list-none items-center flex-col text-2xl mt-10 w-full",children:r.map((d,h)=>c("li",{className:"first:mb-3 first:text-white first:font-bold text-gray-200 contents",children:c(M,{children:d})},h))})]})}R(c(T,{}),document.getElementById("app"));
